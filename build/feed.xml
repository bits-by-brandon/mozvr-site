<?xml version="1.0" encoding="utf-8" ?>
<rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:wfw="http://wellformedweb.org/CommentAPI/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Web VR</title>
    <atom:link href="http://localhost:8080/feed.xml" rel="self" type="application/rss+xml"></atom:link>
    <link>http://localhost:8080</link>
    <description>Wherever you go, there you are.</description>
    <pubDate>Sun, 05 Oct 2014 15:00:00 -0700</pubDate>
    <generator>Wintersmith - https://github.com/jnordberg/wintersmith</generator>
    <language>en</language>
    <item>
      <title>Sechelt</title>
      <link>http://localhost:8080/build/articles/sechelt/</link>
      <pubDate>Sun, 05 Oct 2014 15:00:00 -0700</pubDate>
      <guid isPermaLink="true">http://localhost:8080/build/articles/sechelt/</guid>
      <author></author>
      <description>&lt;p&gt;&lt;img src=&quot;/build/articles/sechelt/c4d-5.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;A collaboration with Ricardo Cabello of Three.js. Inspired by the coastline of British Columbia and the work of Roy Henry Vickers. Created with Cinema 4D, Three.js.&lt;/p&gt;
&lt;!-- tools: [ &quot;Three.js&quot;, &quot;Cinema4D&quot; ] --&gt;

&lt;h2 id=&quot;basic-workflow&quot;&gt;Basic workflow&lt;/h2&gt;
&lt;p&gt;The high level process that brough Sechelt to life:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Scene modeled in Cinema 4D&lt;/li&gt;
&lt;li&gt;Scene optimized by combinig geometries and eliminating unnecessary materials.&lt;/li&gt;
&lt;li&gt;Scene models exported from Cinema 4D to Collada .DAE.&lt;/li&gt;
&lt;li&gt;DAE file opened in &lt;a href=&quot;http://threejs.org/editor/&quot;&gt;Three.js Editor&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Scene setup, animation, interactivity and sound created in &lt;a href=&quot;http://threejs.org&quot;&gt;Three.js&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;VR support implemented with VRControls and VREffect Three.js extras.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;pre-production&quot;&gt;Pre Production&lt;/h2&gt;
&lt;h3 id=&quot;inspiration-and-art-direction&quot;&gt;Inspiration and art direction&lt;/h3&gt;
&lt;p&gt;Sechelt as location using Google Earth
Roy Henry Vickers
Doug Coupland’s take on the coast of BC
Journey, Shape of the World
Sketches&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.royhenryvickers.com/&quot;&gt;Roy Henry Vickers&lt;/a&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/build/articles/sechelt/artdirection-rhv.png&quot; alt=&quot;Roy Henry Vickers&quot;&gt;&lt;/p&gt;
&lt;p&gt;Douglas Coupland:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/build/articles/sechelt/artdirection-dc.png&quot; alt=&quot;Douglas Coupland&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/build/articles/sechelt/photo1.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;scouting-a-location&quot;&gt;Scouting a location&lt;/h3&gt;
&lt;p&gt;It was important to us to capture the reality of BC’s coastal landscape, with its steep glacier-carved valleys and it’s uncountable forested islands, stretching north from Vancouver to Alaska. To find a location, we used Google Earth to identify promising flight paths and vistas, eventually settling on a path stretching south from a mountain peak to the town of Sechelt.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/build/articles/sechelt/googleearth-2.png&quot; alt=&quot;The Sechelt scene &quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/build/articles/sechelt/map1.png&quot; alt=&quot;The Motion Camera settings&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;cinema-4d&quot;&gt;Cinema 4D&lt;/h2&gt;
&lt;h3 id=&quot;modeling-and-lighting&quot;&gt;Modeling and lighting&lt;/h3&gt;
&lt;p&gt;This landscape was then modeled in Cinema 4D using the sculpt tool. Getting the lighting right was critical to achieving the desired look, and performance was a concern, so we opted to use a shader-based system. There are no lights in the scene. The landscape, water, trees etc are all colored with shaders. The fade of the landscape, from purple to light blue as it stretches into the distance, was achieved with a Gradient shader in the landscape material’s Luminance channel. The shader is a set to 2000cm, and mapped to the position of the camera, making objects close to the camera dark, and objects further away progressively lighter.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/build/articles/sechelt/c4d-1.png&quot; alt=&quot;The Cinema 4D setup &quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;camera-animation&quot;&gt;Camera animation&lt;/h3&gt;
&lt;p&gt;The camera animation was defined with Cinema 4D’s Motion Camera tool. A spline was carefully modeled, sweeping through the scene. The Motion Camera’s path was set to the spline, and the Camera Position then animated from 0 to 100$. At the end I wanted the camera to come to rest in a very precise position, which proved difficult to achieve by tweaking the spline points. So we instead created a second camera, framed it just right, then set the Motion Camera to switch between aligning itself to the spline, and aligning itself to this second camera, at the very end of the sequence. The final effect was seamless.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/build/articles/sechelt/c4d-6.png&quot; alt=&quot;The Motion Camera settings&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;exporting-the-cinema-4d-assets&quot;&gt;Exporting the Cinema 4D assets&lt;/h3&gt;
&lt;p&gt;To exporting the assets from Cinema 4D to Three.js it was important to get several things right, or we found the results were unwieldy, mismatched, slow, etc. The steps we took were to:&lt;/p&gt;
&lt;h4 id=&quot;1-adjust-the-scale&quot;&gt;1. Adjust the scale&lt;/h4&gt;
&lt;p&gt;The original scene was modeled to match the actual landscape, in meters. This made the units too massive to easily handle, however, so we scaled the scene down to centimeters before exporting.&lt;/p&gt;
&lt;h4 id=&quot;2-reduce-the-number-of-individual-objects-by-merging&quot;&gt;2. Reduce the number of individual objects by merging&lt;/h4&gt;
&lt;p&gt;In Cinema 4D the trees were dozens of individual objects each with their own instance of the tree material. It is important to reduce the number of unique geometries and materials when working with Three.js, however, for both performance and logistics reasons. So before we exported the scene, we deleted any unused objects and merged the trees into one single object with one material instance.&lt;/p&gt;
&lt;h4 id=&quot;3-clean-up-the-geometry&quot;&gt;3. Clean up the geometry&lt;/h4&gt;
&lt;p&gt;If the camera was not going to see something, we deleted it. The meant carving out sections of the landscape, such as the backside of the mountains flanking the vallies.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/build/articles/sechelt/c4d-4.png&quot; alt=&quot;The final Sechelt model landscape model. The white line is the camera&amp;#39;s path. &quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;three-js-implementation&quot;&gt;Three.js Implementation&lt;/h2&gt;
&lt;h3 id=&quot;importing-scene-models&quot;&gt;Importing scene models&lt;/h3&gt;
&lt;p&gt;We recreated the Cinema 4D scene in Three.js by importing the objects inside the .DAE file with the following:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;lang-javascript&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; loader = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; THREE.ObjectLoader();
loader.load( &lt;span class=&quot;string&quot;&gt;'c4d-scene.json'&lt;/span&gt;, &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;params&quot;&gt;( object )&lt;/span&gt; {&lt;/span&gt;

  &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; landscape = object.getObjectByName( &lt;span class=&quot;string&quot;&gt;'lanscape'&lt;/span&gt; );

  &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; reflection = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; THREE.Mesh( landscape.geometry, landscape.material.clone() );
  reflection.material.side = THREE.BackSide;
  reflection.position.y = &lt;span class=&quot;number&quot;&gt;7.7&lt;/span&gt;;
  reflection.scale.y = -&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;
  landscape.parent.add( reflection );

  scene.add( object );

} );
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;To create the effect of the lanscape reflecting on the “water”, Ricardo actually duplicated the landscape, inverted it on the Y-axis, and moved it down. This seems more convoluted than simply created a water surface with a reflection shader (as we did in the original Cinema 4D scene), but within WebGL this approach is faster and enables finer control over the look of the reflection by modifying the reflection object’s materials and other scene objects.&lt;/p&gt;
&lt;h3 id=&quot;ambient-sounds&quot;&gt;Ambient sounds&lt;/h3&gt;
&lt;p&gt;As the user moves through the scene they hear waves, wildlife, and wind. These sounds are mapped to the environment itself, helping to create a sense of immersion within the 3D world. This effect was achieved by Ricardo, who created null objects in the 3D world, mapped sounds to them, and mapped the playback volume of the sounds to the distance of the user. Sound clips were sourced from &lt;a href=&quot;http://www.freesound.org&quot;&gt;Freesound.org&lt;/a&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;lang-javascript&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; listener = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; THREE.AudioListener();
camera.add( listener );

&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; sound = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; THREE.Audio( listener );
sound.load( &lt;span class=&quot;string&quot;&gt;'sounds/78389__inchadney__seagulls.ogg'&lt;/span&gt; );
sound.position.set( &lt;span class=&quot;number&quot;&gt;475&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;50&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;850&lt;/span&gt; );
sound.setLoop( &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt; );
sound.setRefDistance( &lt;span class=&quot;number&quot;&gt;100&lt;/span&gt; );
scene.add( sound );
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;camera-system&quot;&gt;Camera system&lt;/h3&gt;
&lt;p&gt;We were inspired by the app Eden River to implement a control scheme that was completely hands free and intuitive. As users fly through the Sechelt scene, their position travels along the path that was defined in Cinema 4D. By tilting their head, however, they can “bank” the camera, like a plane, to steer left and right, deviating slightly in the direction they wish to go. This feels a bit like flying a plane. We love this control scheme because 1) it takes advantage of the head set’s innate head tracking capabilities, 2) it is entirely optional, with new users able to enjoy their experience even if they never discover the head-tilt mechanic, 3) it does not require an external input device, and 4) it is so satisfying.&lt;/p&gt;
&lt;p&gt;Ricardo implemented this control scheme in Three.js by creating a dolly system that tracks both the user’s headset data and the position of the camera on the pre-defined path, and then averages them.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;lang-javascript&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ( cameraPath !== &lt;span class=&quot;literal&quot;&gt;undefined&lt;/span&gt; ) {

  &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; time = ( performance.now() / &lt;span class=&quot;number&quot;&gt;40000&lt;/span&gt; ) % &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;

  &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; pointA = cameraPath.getPointAt( time );
  &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; pointB = cameraPath.getPointAt( &lt;span class=&quot;built_in&quot;&gt;Math&lt;/span&gt;.min( time + &lt;span class=&quot;number&quot;&gt;0.015&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; ) );

  pointA.z = -pointA.z;
  pointB.z = -pointB.z;

  dolly.position.copy( pointA );
  dolly.lookAt( pointB );

  dolly.rotateY( &lt;span class=&quot;built_in&quot;&gt;Math&lt;/span&gt;.PI ); &lt;span class=&quot;comment&quot;&gt;// look forward&lt;/span&gt;

}

controls.update();

sky.position.copy( dolly.position );

water.position.x = dolly.position.x;
water.position.z = dolly.position.z;

effect.render( scene, camera );
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;To bring camera data from Cinema 4D into Three.js, we exported the individual points that define the camera path in C4D as ASCII text, and then imported them into Three.js using an importer that Ricardo wrote:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;lang-javascript&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; loader = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; THREE.C4DLineLoader();
loader.load( &lt;span class=&quot;string&quot;&gt;'flightpath-ascii.txt'&lt;/span&gt;, &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;params&quot;&gt;( line )&lt;/span&gt; {&lt;/span&gt;

  cameraPath = line;

} );
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;testing-optimization&quot;&gt;Testing &amp;amp; Optimization&lt;/h2&gt;
&lt;h3 id=&quot;adding-vr-headset-support&quot;&gt;Adding VR headset support&lt;/h3&gt;
&lt;p&gt;Support for VR headsets was implemented with two Three.js components: VRControls and VREffect. These take the scene and…&lt;/p&gt;
&lt;h3 id=&quot;testing&quot;&gt;Testing&lt;/h3&gt;
&lt;p&gt;We tested the results with DK1 and DK2 headsets and random co-workers, trying to find people who were particularly sensitive to the nauseau and disorientation that VR can produce if not properly calibrated.&lt;/p&gt;
&lt;h3 id=&quot;deployment&quot;&gt;Deployment&lt;/h3&gt;
&lt;p&gt;For the start of the development process we simple worked out of a Dropbox folder, with Ricardo saving this progress as he went. Our standard process is to use Git, NPM and Gulp track changes, manage dependencies and automate various development tasks, but early in the process we were more concerned with quick results, and with just Ricardo doing the code a simple setup was good enough. Before deploying, however, we organized the code and pushed to GitHub, hosting everything with gh-pages, using &lt;a href=&quot;https://www.npmjs.org/package/gulp-gh-pages&quot;&gt;gulp-gh-pages&lt;/a&gt; to automate the process.&lt;/p&gt;
</description>
    </item>
    <item>
      <title>Information Diving</title>
      <link>http://localhost:8080/build/articles/infodive/</link>
      <pubDate>Sat, 04 Oct 2014 22:00:00 -0700</pubDate>
      <guid isPermaLink="true">http://localhost:8080/build/articles/infodive/</guid>
      <author></author>
      <description>&lt;p&gt;&lt;img src=&quot;/build/articles/infodive/artdirection-1.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;Tatiana Plakhova’s information landscapes are presented in virtual reality using the power of Three.js and GLAM.&lt;/p&gt;
&lt;!-- tools: [ &quot;Three.js&quot;, &quot;Cinema4D&quot; ] --&gt;

&lt;h2 id=&quot;basic-workflow&quot;&gt;Basic workflow&lt;/h2&gt;
&lt;p&gt;The high level process that brough Information Diving to life:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Scene modeled in Cinema 4D&lt;/li&gt;
&lt;li&gt;Primitives created with WebGL and Three.js&lt;/li&gt;
&lt;li&gt;Glamified&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;pre-production&quot;&gt;Pre Production&lt;/h2&gt;
&lt;h3 id=&quot;inspiration-and-art-direction&quot;&gt;Inspiration and art direction&lt;/h3&gt;
&lt;p&gt;ttt&lt;/p&gt;
&lt;h2 id=&quot;cinema-4d&quot;&gt;Cinema 4D&lt;/h2&gt;
&lt;p&gt;ttt&lt;/p&gt;
&lt;h2 id=&quot;three-js-implementation&quot;&gt;Three.js Implementation&lt;/h2&gt;
&lt;h3 id=&quot;importing-scene-models&quot;&gt;Importing scene models&lt;/h3&gt;
&lt;p&gt;ttt&lt;/p&gt;
&lt;h2 id=&quot;testing-optimization&quot;&gt;Testing &amp;amp; Optimization&lt;/h2&gt;
&lt;h3 id=&quot;adding-vr-headset-support&quot;&gt;Adding VR headset support&lt;/h3&gt;
&lt;p&gt;Support for VR headsets was implemented with two Three.js components: VRControls and VREffect. These take the scene and…&lt;/p&gt;
&lt;p&gt;ttt&lt;/p&gt;
</description>
    </item>
  </channel>
</rss>